<!--
  Paramedic Documentation Suite
  Version: 2.1.0 | Author: Vlad da Cunha
  Verified for internal use.
  Integrity Checksum: 3e99de104450c31041def1454e2d1682180429b86d871c01ce48b1135597a06e
  Generated: 2025-11-03
-->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSE Generator</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <meta name="author" content="Vlad da Cunha">
  <meta name="description" content="Clinical documentation support tool for paramedics â€“ VIRCA, MSE, and FLACC statement generation.">
  <meta name="version" content="2.1.0">
  <meta name="last-updated" content="2025-11-03">


<!-- Safe and CSP-compliant meta -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self';
               style-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline';
               script-src 'self' https://code.jquery.com https://cdnjs.cloudflare.com https://static.cloudflareinsights.com 'unsafe-inline';
               font-src 'self' https://cdnjs.cloudflare.com data:;
               img-src 'self' data:;
               connect-src 'self';">
</head>
<body>

<!-- Header loaded dynamically -->
<div id="header-placeholder"></div>

<div class="container">
  <div class="left">
    <h2 class="tool-title">Mental Status Examination (MSE)</h2>

    <div class="section" id="appearance-section">
      <h3>Appearance</h3>
      <p class="description">Physical presentation, grooming, clothing, and hygiene. Note neglect, agitation, or unusual attire.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="neatly dressed and groomed"> Neatly dressed / groomed</label>
        <label><input type="checkbox" value="dishevelled or unkempt"> Dishevelled / unkempt</label>
        <label><input type="checkbox" value="appears older or younger than stated age"> Appears older/younger than age</label>
        <label><input type="checkbox" value="poor hygiene or odour present"> Poor hygiene / odour</label>
        <label><input type="checkbox" value="wearing weather-inappropriate clothing"> Weather-inappropriate clothing</label>
      </div>
      <textarea id="appearance-extra" placeholder="Additional notes about appearance"></textarea>
    </div>

    <div class="section" id="behaviour-section">
      <h3>Behaviour</h3>
      <p class="description">Observed actions, movements, engagement. Look for cooperation, restlessness, agitation, guardedness, eye contact, psychomotor change.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="calm and cooperative"> Calm and cooperative</label>
        <label><input type="checkbox" value="agitated or restless"> Agitated / restless</label>
        <label><input type="checkbox" value="guarded or withdrawn"> Guarded / withdrawn</label>
        <label><input type="checkbox" value="eye contact appropriate"> Appropriate eye contact</label>
        <label><input type="checkbox" value="poor or fleeting eye contact"> Poor / fleeting eye contact</label>
        <label><input type="checkbox" value="psychomotor agitation or retardation noted"> Psychomotor changes</label>
      </div>
      <textarea id="behaviour-extra" placeholder="Additional notes about behaviour"></textarea>
    </div>

    <div class="section" id="speech-section">
      <h3>Speech</h3>
      <p class="description">Rate, rhythm, tone, coherence. Reflects thought speed, emotional state, sometimes neurological status.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="normal rate and volume"> Normal rate/volume</label>
        <label><input type="checkbox" value="rapid or pressured speech"> Rapid / pressured</label>
        <label><input type="checkbox" value="slow or minimal speech"> Slow / minimal</label>
        <label><input type="checkbox" value="slurred or incoherent speech"> Slurred / incoherent</label>
        <label><input type="checkbox" value="monotone or flat tone"> Monotone / flat</label>
      </div>
      <textarea id="speech-extra" placeholder="Additional notes about speech"></textarea>
    </div>

    <div class="section" id="mood-section">
      <h3>Mood / Affect</h3>
      <p class="description">Subjective mood and observed affect/visible emotion (range, congruence). Incongruence or restriction can indicate psychopathology.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="reports mood as euthymic"> Euthymic (normal) mood</label>
        <label><input type="checkbox" value="reports feeling depressed or low"> Depressed / low</label>
        <label><input type="checkbox" value="elated or euphoric"> Elated / euphoric <span class="description">(excessive cheerfulness or optimism that appears disproportionate to the situation)</span></label>
        <label><input type="checkbox" value="anxious or tense"> Anxious / tense</label>
        <label><input type="checkbox" value="irritable or angry"> Irritable / angry</label>
        <label><input type="checkbox" value="labile"> Labile <span class="description">(fluctuating rapidly between emotions such as laughter and tearfulness without clear triggers)</span></label>
        <label><input type="checkbox" value="affect restricted or flat"> Restricted / flat affect</label>
        <label><input type="checkbox" value="affect congruent with mood"> Affect congruent <span class="description">(visible emotion matches what they are talking about or how they say they feel)</span></label>
        <label><input type="checkbox" value="affect incongruent with mood"> Affect incongruent <span class="description">(visible emotion is different to what they are talking about or how they say they feel)</span></label>
      </div>
      <textarea id="mood-extra" placeholder="Additional notes about mood/affect"></textarea>
    </div>

    <div class="section" id="thoughtform-section">
      <h3>Thought Form</h3>
      <p class="description">Structure/flow of thoughts. Disorganisation, tangentiality, flight of ideas may suggest mania or psychosis.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="logical and coherent"> Logical / coherent</label>
        <label><input type="checkbox" value="flight of ideas or tangential"> Flight of ideas / tangential</label>
        <label><input type="checkbox" value="circumstantial or over-inclusive"> Circumstantial / over-inclusive <span class="description">(excessive amount of unnecessary detail, side points, or irrelevant information before eventually returning to the main idea or answering a question</span></label>
        <label><input type="checkbox" value="thought blocking noted"> Thought blocking <span class="description">(sudden interruption in the train of thought or speech before a thought or idea is completed)</span></label>
        <label><input type="checkbox" value="disorganised or incoherent thought processes"> Disorganised / incoherent</label>
      </div>
      <textarea id="thoughtform-extra" placeholder="Additional notes about thought form"></textarea>
    </div>

    <div class="section" id="thoughtcontent-section">
      <h3>Thought Content</h3>
      <p class="description">Themes, beliefs, abnormal thoughts (delusions, obsessions, suicidality). Important for risk and diagnosis.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="no delusional or abnormal thoughts reported"> No delusional content</label>
        <label><input type="checkbox" value="preoccupied with specific themes or worries"> Preoccupied with themes</label>
        <label><input type="checkbox" value="expresses suicidal ideation"> Suicidal ideation</label>
        <label><input type="checkbox" value="expresses homicidal ideation"> Homicidal ideation</label>
        <label><input type="checkbox" value="reports paranoid or persecutory beliefs"> Paranoid beliefs</label>
        <label><input type="checkbox" value="grandiose or bizarre delusions"> Grandiose / bizarre delusions</label>
      </div>
      <textarea id="thoughtcontent-extra" placeholder="Additional notes about thought content"></textarea>
    </div>

    <div class="section" id="perception-section">
      <h3>Perception</h3>
      <p class="description">Sensory experience. Hallucinations/illusions can indicate psychosis, intoxication, or organic dysfunction.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="no perceptual disturbances reported"> No perceptual disturbance</label>
        <label><input type="checkbox" value="reports auditory hallucinations"> Auditory hallucinations</label>
        <label><input type="checkbox" value="reports visual hallucinations"> Visual hallucinations</label>
        <label><input type="checkbox" value="reports illusions or misperceptions"> Illusions / misperceptions</label>
        <label><input type="checkbox" value="appears responding to internal stimuli"> Responding to internal stimuli</label>
      </div>
      <textarea id="perception-extra" placeholder="Additional notes about perception"></textarea>
    </div>

    <div class="section" id="cognition-section">
      <h3>Cognition</h3>
      <p class="description">Orientation, attention, memory, concentration. Abnormalities may indicate delirium, dementia, intoxication.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="alert and oriented to time, place, and person"> Alert / oriented to time, place and person</label>
        <label><input type="checkbox" value="mild confusion or disorientation noted"> Mild disorientation</label>
        <label><input type="checkbox" value="impaired attention or concentration"> Impaired concentration</label>
        <label><input type="checkbox" value="short-term memory intact"> Memory intact</label>
        <label><input type="checkbox" value="short-term memory impaired"> Memory impaired</label>
      </div>
      <textarea id="cognition-extra" placeholder="Additional notes about cognition"></textarea>
    </div>

    <div class="section" id="insight-section">
      <h3>Insight & Judgment</h3>
      <p class="description">Awareness of illness and decision-making capacity. Poor insight affects adherence/safety; judgment informs risk.</p>
      <div class="checkbox-group">
        <label><input type="checkbox" value="good insight into condition"> Good insight</label>
        <label><input type="checkbox" value="limited or poor insight"> Poor / limited insight</label>
        <label><input type="checkbox" value="judgment appears intact"> Judgment intact</label>
        <label><input type="checkbox" value="judgment appears impaired"> Judgment impaired</label>
      </div>
      <textarea id="insight-extra" placeholder="Additional notes about insight/judgment"></textarea>
    </div>
  </div>

  <div class="right">
    <h2 class="tool-title">Generated MSE Summary</h2>
    <div id="output"></div>
    <button id="copyAll">ðŸ“‹ Copy Full MSE</button>
  </div>
</div>

<!-- Floating Toggle Button (mobile) -->
<button id="toggleView" class="toggle-btn">
  <i class="fas fa-arrow-down"></i> Jump to Output
</button>

<!-- Footer loaded dynamically -->
<div id="footer-placeholder"></div>

<script>
// Load shared header & footer
document.addEventListener("DOMContentLoaded", function() {
  fetch("header.html").then(r=>r.text()).then(h=>{
    document.getElementById("header-placeholder").innerHTML = h;
  });
  fetch("footer.html").then(r=>r.text()).then(f=>{
    document.getElementById("footer-placeholder").innerHTML = f;
  });
});

// Build MSE output
$(document).ready(function(){
  const sections = ['appearance','behaviour','speech','mood','thoughtform','thoughtcontent','perception','cognition','insight'];
  const nameMap = { thoughtform: 'Thought Form', thoughtcontent: 'Thought Content' };

  function buildText(){
    $('#output').empty();
    sections.forEach(sec=>{
      const vals = $(`#${sec}-section input:checked`).map((_,e)=>e.value).get();
      const extra = $(`#${sec}-extra`).val()?.trim() || '';
      const heading = nameMap[sec] || (sec.charAt(0).toUpperCase()+sec.slice(1));
      let content = '';
      if (vals.length) content = vals.join(', ') + (extra ? '. ' + extra : '.');
      else if (extra) content = extra;

      const html = `
        <div id="${sec}-output" class="sentence">
          <strong>${heading}:</strong>
          <i class="fas fa-copy copy-icon" data-target="${sec}" title="Copy ${heading}"></i>
          <p class="content">${content}</p>
        </div>`;
      $('#output').append(html);
    });
  }

  $(document).on('input change', 'input, textarea', buildText);

  // Copy individual section: "Heading: content"
  $(document).on('click', '.copy-icon', function(){
    const id = $(this).data('target');
    const heading = nameMap[id] || (id.charAt(0).toUpperCase()+id.slice(1));
    const text = $(`#${id}-output .content`).text().trim();
    const formatted = `${heading}: ${text}`;
    navigator.clipboard.writeText(formatted);
    $(this).removeClass('fa-copy').addClass('fa-check');
    setTimeout(()=>$(this).removeClass('fa-check').addClass('fa-copy'),1000);
  });

 $('#copyAll').on('click', function(){
  const lines = ['Mental Status Examination']; // <-- add the header here

  $('.sentence').each(function(){
    const heading = $(this).find('strong').text().trim().replace(/:$/, '');
    const content = $(this).find('.content').text().trim();
    if (content) {
      lines.push(`${heading}: ${content}`);
    }
  });

  navigator.clipboard.writeText(lines.join("\n"));
  $(this).text('âœ… Copied!');
  setTimeout(()=>$(this).text('ðŸ“‹ Copy full MSE'),1200);
});

  buildText();
});

// Floating toggle logic (mobile only; fade in/out)
(function(){
  const btn = document.getElementById('toggleView');
  const left = document.querySelector('.left');
  const right = document.querySelector('.right');
  let showingOutput = false;

  function onScroll(){
    const y = window.scrollY || document.documentElement.scrollTop;
    if (y > 120) {
      btn.classList.add('visible');
    } else {
      btn.classList.remove('visible');
      btn.innerHTML = '<i class="fas fa-arrow-down"></i> Jump to Output';
      showingOutput = false;
    }
  }
  window.addEventListener('scroll', onScroll, { passive: true });

  btn.addEventListener('click', () => {
    if (!showingOutput) {
      right.scrollIntoView({ behavior: 'smooth' });
      btn.innerHTML = '<i class="fas fa-arrow-up"></i> Jump to Input';
      showingOutput = true;
    } else {
      left.scrollIntoView({ behavior: 'smooth' });
      btn.innerHTML = '<i class="fas fa-arrow-down"></i> Jump to Output';
      showingOutput = false;
    }
  });
})();

//Add current year to footer
$(document).ready(function() {
  $.get("footer.html", function(html) {
    $("#footer-placeholder").html(html);
    $("#currentYear").text(new Date().getFullYear());
  });
});
</script>

</body>
</html>
